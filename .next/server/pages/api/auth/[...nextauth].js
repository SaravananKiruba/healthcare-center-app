"use strict";(()=>{var e={};e.id=748,e.ids=[748],e.modules={3524:e=>{e.exports=require("@prisma/client")},8432:e=>{e.exports=require("bcryptjs")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,r)=>{Object.defineProperty(r,"l",{enumerable:!0,get:function(){return function e(r,i){return i in r?r[i]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,i)):"function"==typeof r&&"default"===i?r:void 0}}})},4828:(e,r,i)=>{i.r(r),i.d(r,{config:()=>s,default:()=>l,routeModule:()=>d});var a=i(1802),n=i(7153),t=i(6249),c=i(7309);let l=(0,t.l)(c,"default"),s=(0,t.l)(c,"config"),d=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:c})},7309:(e,r,i)=>{i.r(r),i.d(r,{authOptions:()=>o,default:()=>u});let a=require("next-auth");var n=i.n(a);let t=require("next-auth/providers/credentials");var c=i.n(t),l=i(8432),s=i.n(l);let d=new(i(3524)).PrismaClient,o={providers:[c()({name:"credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)throw Error("Invalid credentials");let r=await d.user.findUnique({where:{email:e.email},include:{clinic:!0,branch:!0}});if(!r||!r.isActive||!await s().compare(e.password,r.hashedPassword))throw Error("Invalid credentials");return{id:r.id,email:r.email,name:r.fullName,role:r.role,clinicId:r.clinicId,branchId:r.branchId,clinicName:r.clinic?.name,branchName:r.branch?.name}}})],session:{strategy:"jwt"},callbacks:{jwt:async({token:e,user:r})=>(r&&(e.role=r.role,e.id=r.id,e.clinicId=r.clinicId,e.branchId=r.branchId,e.clinicName=r.clinicName,e.branchName=r.branchName),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id,e.user.role=r.role,e.user.clinicId=r.clinicId,e.user.branchId=r.branchId,e.user.clinicName=r.clinicName,e.user.branchName=r.branchName),e)},pages:{signIn:"/login"},secret:process.env.NEXTAUTH_SECRET},u=n()(o)},7153:(e,r)=>{var i;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return i}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(i||(i={}))},1802:(e,r,i)=>{e.exports=i(145)}};var r=require("../../../webpack-api-runtime.js");r.C(e);var i=r(r.s=4828);module.exports=i})();